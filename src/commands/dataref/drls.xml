<?xml version="1.0" encoding="UTF-8"?>
<command name="DRLS" title="List DataRefs" group="dataref"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="../../command.xsd">
    <mnemonic><m>D</m>ata<m>R</m>ef <m>L</m>i<m>s</m>t</mnemonic>
    <description>
        Lists information about available datarefs. The command allows retrieval of information about specific datarefs as well as listing all datarefs known to X-Plane (unspecific). Unspecific retrieval depends on X-Plane 12.04 APIs or workarounds in case of previous versions. If unspecific retrieval is requested but not supported, servers should reply with an error status.
    </description>
    <options>
        <option name="rwCheck" default="simulator">
            <description>
                Use the read-only/read-write flag available from X-Plane or check for internal permissions available to datarefs claimed by XPRC?
            </description>
            <constants>
                <constant name="simulator">
                    use the flag published on X-Plane (may give a false `ro` indication for datarefs claimed by XPRC)
                </constant>
                <constant name="server">
                    if the dataref is claimed by XPRC, check for general availability in XPRC
                </constant>
                <constant name="session">
                    if the dataref is claimed by XPRC, check for the current session
                </constant>
            </constants>
        </option>
    </options>
    <parameters>
        <parameter multiplicity="*">Dataref name (string) to retrieve information for. If no names are provided, all available datarefs are listed (unspecific query).</parameter>
    </parameters>
    <responses>
        <response>Status: `ACK` if requested listing is technically possible, `ERR` if not</response>
        <response>
            one dataref definition per message; fields separated by semicolon:
            1. comma-separated list of supported data types (see DataRef Types)
            2. `ro` if indicated as read-only, `rw` if indicated as writable
            3. name of DataRef
        </response>
        <remark>
            If information about specific datarefs has been requested but some (or all) of them are not found within X-Plane, the returned list may be incomplete. A completely empty result (e.g. `+ACK` followed by `-ACK`) is also possible in that case.
        </remark>
    </responses>
    <examples>
        <example>
            <client>ABCD DRLS</client>
            <server>+ACK ABCD 1836</server>
            <server>+ABCD 2642 int,float,double;rw;sim/some/ref</server>
            <server>+ABCD 2642 blob;ro;something/else</server>
            <server>-ABCD 2642 int;rw;what/ever</server>
        </example>
        <example>
            <client>BBBB DRLS sim/some/ref;non/existent</client>
            <server>+ACK BBBB 3520</server>
            <server>-BBBB 3526 int,float,double;rw;sim/some/ref</server>
        </example>
        <example>
            <client>FFFF DRLS non/existent</client>
            <server>+ACK FFFF 6789</server>
            <server>-ACK FFFF 6800</server>
        </example>
        <example>
            <client>UUUU DRLS</client>
            <server>-ERR UUUU 5710 unspecific queries are not supported</server>
        </example>
    </examples>
</command>
